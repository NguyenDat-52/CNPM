@model QuanLyKhachSan.Models.PHONG
@{
    ViewBag.Title = "Đặt Phòng";
    var img = Model.ALBUM_ANH_PHONG.FirstOrDefault()?.LINK_ANH ?? "https://images.unsplash.com/photo-1611892440504-42a792e24d32?auto=format&fit=crop&w=400&q=80";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card border-0 shadow-lg">
                <div class="card-header bg-primary text-white p-4">
                    <h3 class="mb-0 text-white">Xác Nhận Đặt Phòng</h3>
                </div>
                <div class="card-body p-5">
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <img src="@img" class="img-fluid rounded" alt="Room">
                        </div>
                        <div class="col-md-8">
                            <h4>@Model.TEN_PHONG</h4>
                            <p class="text-muted">Loại: @Model.LOAI_PHONG.TEN_LOAI</p>
                            <h4 class="text-primary">@((Model.LOAI_PHONG.GIA_MOT_DEM ?? 0).ToString("#,##0")) VNĐ <small class="fs-6 text-muted">/ đêm</small></h4>
                        </div>
                    </div>

                    @using (Html.BeginForm("ConfirmBooking", "Booking", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                        @Html.Hidden("roomId", Model.MA_PHONG)

                        if (!ViewData.ModelState.IsValid)
                        {
                            <div class="alert alert-danger">
                                @Html.ValidationSummary(false, "")
                            </div>
                        }

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Ngày Nhận Phòng</label>
                                <input type="date" name="ngayDat" class="form-control" required min="@DateTime.Now.ToString("yyyy-MM-dd")" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Ngày Trả Phòng (Dự kiến)</label>
                                <input type="date" name="ngayTra" class="form-control" required min="@DateTime.Now.AddDays(1).ToString("yyyy-MM-dd")" />
                            </div>
                        </div>

                        <div class="mt-4 pt-3 border-top">
                             <div class="alert alert-info small">
                                 <i class="fas fa-info-circle me-1"></i>
                                 Tiền cọc 30% sẽ được tính tự động.
                             </div>
                        </div>

                        <div class="d-grid gap-2 mt-4">
                            <button type="submit" class="btn btn-hotel btn-lg">XÁC NHẬN ĐẶT PHÒNG</button>
                            <a href="@Url.Action("Details", "Room", new { id = Model.MA_PHONG })" class="btn btn-light text-muted">Hủy bỏ</a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
